<div class="header-tool accent mb-24">
    <div class="flex-center">
        <mat-icon class="mr-8 s-22" matSuffix>add_box</mat-icon>
        <span class="h2">Edit contact</span>
    </div>
    <div class="flex-center">

        <mdc-form-status></mdc-form-status>

    </div>
    <div>
        <button mat-flat-button type="button" (click)="onDone()" class="ml-8">Done</button>
    </div>

</div>

<mdc-form-infobox-error [dataLink]="errors"></mdc-form-infobox-error>

<div class="todo-content">

    <form #form="ngForm" autocomplete="off">
        <div class="todo-header" fxLayout="row" fxLayoutAlign="space-between center">
        
            <div class="actions" fxLayout="row" fxLayoutAlign="start center">
                <button mat-button class="toggle-complete-button" 
                    aria-label="Toggle completed" fxFlex="0 1 auto">
                    <mat-icon [(ngModel)]="todo.isCompleted" *ngIf="todo.isCompleted" (click)="toggleCompleted($event)">check_box</mat-icon>
                    <mat-icon [(ngModel)]="todo.isCompleted" *ngIf="!todo.isCompleted" (click)="toggleCompleted($event)">check_box_outline_blank</mat-icon>
                <span class="ml-8">Mark as Done</span>
                </button>

                <button mat-icon-button  aria-label="Toggle important">
                    <mat-icon [(ngModel)]="todo.isImportant" *ngIf="todo.isImportant" class="red-fg" (click)="toggleImportant($event)">error</mat-icon>
                    <mat-icon [(ngModel)]="todo.isImportant" *ngIf="!todo.isImportant" class="secondary-text" (click)="toggleImportant($event)">error_outline</mat-icon>
                </button>
        
                <button mat-icon-button  aria-label="Toggle star">
                    <mat-icon [(ngModel)]="todo.isStarred" *ngIf="todo.isStarred" class="amber-fg" (click)="toggleStarred($event)">star</mat-icon>
                    <mat-icon [(ngModel)]="todo.isStarred" *ngIf="!todo.isStarred" class="secondary-text" (click)="toggleStarred($event)">star_border</mat-icon>
                </button>
        
            </div>
        </div>

        <mat-form-field appearance="outline" class="title mt-8" fxFill>
            <mat-label>Title</mat-label>
            <textarea matInput #titleControl="ngModel" [(ngModel)]="todo.title"
                        #titleInput
                        name="title"
                        required>
            </textarea>
        </mat-form-field>

        <div class="dates" fxFlexFill fxLayout="column" fxLayout.gt-xs="row">

            <mat-form-field appearance="outline" class="mr-sm-12" fxFlex>
                <mat-label>Start Date</mat-label>
                <input matInput [matDatepicker]="startDatePicker" #startDateControl="ngModel" name="startDate" [(ngModel)]="todo.startDate">
                <mat-datepicker-toggle matSuffix [for]="startDatePicker"></mat-datepicker-toggle>
                <mat-datepicker #startDatePicker></mat-datepicker>
            </mat-form-field>

            <mat-form-field appearance="outline" class="ml-sm-12" fxFlex>
                <mat-label>Due Date</mat-label>
                <input matInput [matDatepicker]="dueDatePicker" placeholder="Due Date" #dueDateControl="ngModel" name="dueDate" [(ngModel)]="todo.dueDate">
                <mat-datepicker-toggle matSuffix [for]="dueDatePicker"></mat-datepicker-toggle>
                <mat-datepicker #dueDatePicker></mat-datepicker>
            </mat-form-field>

        </div>

        <mat-form-field appearance="outline" fxFill>
            <mat-label>Notes</mat-label>
            <textarea matInput #notesControl="ngModel" [(ngModel)]="todo.notes" #notes
                        name="notes"
                        maxlength="500">
            </textarea>
            <mat-hint align="end">{{notes.value.length}} / 500</mat-hint>
        </mat-form-field>
    </form>

</div>